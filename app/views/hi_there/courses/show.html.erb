<div class="container">
  <div class="page">
    <div class="page-header">
      <h1 class="page-title"><%= @course.title %></h1>
    </div>

    <div class="page-actions">
      <div class="btn-toolbar">
        <div class="btn-group">
          <% if @course.draft? or @course.closed? %>
            <%= button_to t('hi_there.courses.actions.open'),
                          open_course_path(@course),
                          class: 'btn btn-default',
                          method: :put %>       

          <% elsif @course.opened? %>
            <%= button_to t('hi_there.courses.actions.close'), 
                          close_course_path(@course), 
                          class: 'btn btn-default', 
                          method: :put %>
          <% end %>

          <% unless @course.terminated? %>
            <%= button_to t('hi_there.courses.actions.terminate'), 
                          terminate_course_path(@course), 
                          class: 'btn btn-default', 
                          method: :put,
                          data: { 
                            confirm: t('hi_there.courses.actions.confirm_terminate') 
                          } %>
          <% end %>

          <% if @course.draft? %>
            <%= link_to t('hi_there.common.actions.edit'), edit_course_path(@course), class: 'btn btn-default' %>          
          <% end %>
        </div>
      </div>
    </div>

    <div class="page-body">

      <div class="alert alert-notice">
        <%= t("hi_there.courses.current_state.#{@course.current_state}") %>
      </div>

      <table class="table">
        <thead>
          <tr>
            <th></th>
            <th>Subject</th>
            <th>Delivered after (days)</th>
            <% if @course.draft? %>
              <th></th>
              <th></th>
              <th></th>
            <% end %>
          </tr>
        </thead>

        <tbody class="course-emails-list">
          <%= render partial: 'hi_there/courses/email', collection: @emails, locals: {editable: @course.draft? } %>
        </tbody>
      </table>  
      <% unless params[:published] %>
        <div class="list-footer">
          <div class="btn-toolbar">
            <div class="btn-group">
              <%= link_to t('hi_there.courses.actions.add_email'), new_course_email_path(@course), class: 'btn btn-default' %>
            </div>
          </div>
        </div>  
      <% end %>
    </div>
  </div>
</div>